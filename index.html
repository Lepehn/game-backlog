<html lang="en">
  <head>
    <meta name="google-site-verification" content="TM2JLp2z2ivvAbxCRiY7ekyg7shRkm4LJ23ywpbje1U" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gamelog</title>
    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        font-family: sans-serif;
        font-size: clamp(14px, 2vw, 16px);
        margin: 20px;
        background: #121212;
        color: #ddd;
      }

      h1 {
        text-align: center;
        margin: 0 auto 20px;
        max-width: 1280px;
        border-radius: 8px;
      }

      /* Container & Layout */
      .content-container {
      display: flex;
      flex-direction: row; /* horizontal layout by default */
      align-items: flex-start;
      gap: 20px;
      max-width: 1280px;
      width: 100%;
      margin: 60px auto 0;
      padding: 0 10px;
    }

      /* Content */
      .content {
        display: none;
        border: none;
        padding: 20px;
        background: #212121;
        border-radius: 8px;
        width: 100%;
        max-width: 1280px;
        margin-left: auto;
        margin-right: auto;
      }

      .content.active {
        display: block;
      }

      .content ul {
        color: #a0a0a0;
      }

      ul {
        list-style: none;
        padding: 0;
      }

      li {
        margin: 5px 0;
      }

      input[type="checkbox"]:checked + label {
        text-decoration: line-through;
        color: #555;
      }
      
      input[type="number"].year-input {
        background: #1a1a1a;
        color: #ccc;
        border: none;
        padding: 6px 8px;
        border-radius: 6px;
        width: 80px;
        font-size: clamp(0.9em, 1.5vw, 0.95em);
        margin-left: 10px;
      }
      
      select.year-input {
        background: #1a1a1a;
        color: #ccc;
        border: none;
        padding: 6px 8px;
        border-radius: 6px;
        font-size: clamp(0.9em, 1.5vw, 0.95em);
        margin-left: 10px;
      }

      /* Tags */
      .tag {
        font-size: clamp(0.8em, 1.5vw, 0.95em);
        padding: 4px 8px;
        border-radius: 8px;
        display: inline-block;
        margin-left: 10px;
        color: #121212;
      }

      .tagCompleted {
        background: #FBE83A;
      }
      .tagNotStarted {
        background: #A4ABB6;
      }
      .tagInProgress {
        background: #2CCCFF;
      }
      .tagOnHold {
        background: #FFB302;
      }

      .tagNote {
        color: #aaa;
        background: #1a1a1a;
        padding: 4px 8px;
        border-radius: 8px;
        display: block;
        margin-left: 20px;
        margin-top: 4px;
        width: fit-content;
        max-width: 100%;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      .tagDLC {
        background: #f7bf00;
      }

      /* Sidebar Styling */
      .sidebar-wrapper {
        width: 100%;
        max-width: 324px;
        height: 100%;
        max-height: 496px;
        flex-shrink: 0;
      }

      .sidebar {
        background: #212121;
        border-radius: 8px;
        padding: 20px;
        width: 100%;
        color: #ccc;
        font-size: clamp(0.9em, 1.5vw, 0.95em);
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .profile-bg {
        width: 50%;
        height: 50%;
        aspect-ratio: 1 / 1;
        background-image: url("https://cdn.discordapp.com/avatars/474408288914505738/62c637c9587dd2b5d501e2a57ca326b7.webp?size=512");
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        border-radius: 8px;
        flex-shrink: 0;
      }
      
      .sidebar h2 {
      	margin-bottom: 0px;
      }

      .sidebar h3 {
        margin-top: 20px;
        color: #a0a0a0;
      }

      .sidebar a {
        color: #88c0d0;
        text-decoration: none;
      }
      .sidebar a:hover {
        text-decoration: underline;
      }

      /* Tabs & Buttons */
      .tab-box {
        background: #212121;
        border-radius: 8px;
        padding: 10px;
        margin-top: 20px;
      }

      .tab-box2 {
        background: #212121;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 20px;
      }

      .tab-buttons {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 100%;
      }

      .tab-buttons2 {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        overflow-x: auto;
      }

      .tab-button {
        padding: 10px;
        background: #2a2a2a;
        color: #ccc;
        border-radius: 6px;
        text-align: center;
        cursor: pointer;
        transition: background 0.2s;
        flex-shrink: 0;
      }

      .tab-button:hover,
      .tab-button.active {
        background: #383838;
        color: #f7bf00;
      }

      .scrollable-list {
        margin-top: 12px;
        max-height: 400px;
        overflow-y: auto;
        padding-right: 8px;
        scrollbar-color: #383838 #1a1a1a;
      }
      
      .progress {
      	padding-top: 8px;
      }

      .content-section {
        flex-grow: 1;
        width: 100%;
      }

      /* Responsive Layout */
      @media (max-width: 768px) {
        .content-container {
          flex-direction: column;
        }
        
        .sidebar-wrapper {
        margin-bottom: 75px;
        }

        .sidebar-wrapper,
        .content-section {
          width: 100%;
        }
      }
      
      .add-form {
        margin: 20px 0;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .add-form input,
      .add-form select,
      .add-form button {
        padding: 8px;
        border-radius: 6px;
        border: none;
      }
      .add-form input,
      .add-form select {
        background: #1a1a1a;
        color: #ccc;
      }
      .add-form button {
        background: #383838;
        color: #f7bf00;
        cursor: pointer;
      }

      .remove-button {
        margin-left: 10px;
        background: #444;
        color: #ccc;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
      }
      .remove-button:hover {
        background: #ff5c5c;
        color: #fff;
      }
</style>
  </head>
  <body>
    <h1>Gamelog</h1>
    <div class="content-container">
      <div class="sidebar-wrapper">
        <div class="sidebar">
          <div class="profile-bg"></div>
           <h2> Lepehn </h2>
           <h3> @Lepehn </h3>
        </div>
        <div class="tab-sidebar">
          <div class="tab-box">
            <div class="tab-buttons">
              <div class="tab-button" data-target="faq">FAQ</div>
              <div class="tab-button" onclick="exportChecklist()">Export Progress</div>
              <div class="tab-button" onclick="importChecklist()">Import Progress <input type="file" id="import-file" style="display: none;" /></div>
            </div>
          </div>
        </div>
      </div>
      <div class="content-section">
        <div class="tab-box2">
          <div class="tab-buttons2">
            <div class="tab-button" data-target="epic">Epic</div>
            <div class="tab-button" data-target="nintendo">Nintendo</div>
            <div class="tab-button" data-target="playstation">Playstation</div>
            <div class="tab-button" data-target="steam">Steam</div>
            <div class="tab-button" data-target="xbox">Xbox</div>
          </div>
        </div>
         <!-- Platform Tabs -->
        <div class="content active" id="epic">
          <h2>Epic Games</h2>
          <form class="add-form" data-platform="epic">
            <input type="text" placeholder="Add game title" required />
            <select>
              <option value="Not Started">Not Started</option>
              <option value="In Progress">In Progress</option>
              <option value="On Hold">On Hold</option>
              <option value="Completed">Completed</option>
            </select>
            <button type="submit">Add</button>
          </form>
          <div id="epic-filters" class="tab-buttons2"></div>
          <div class="progress" id="epic-progress">Completed 0 / 0</div>
          <div class="scrollable-list">
            <ul id="epic-games"></ul>
          </div>
        </div>

        <div class="content" id="nintendo">
          <h2>Nintendo</h2>
          <form class="add-form" data-platform="nintendo">
            <input type="text" placeholder="Add game title" required />
            <select>
              <option value="Not Started">Not Started</option>
              <option value="In Progress">In Progress</option>
              <option value="On Hold">On Hold</option>
              <option value="Completed">Completed</option>
            </select>
            <button type="submit">Add</button>
          </form>
          <div class="progress" id="nintendo-progress">Completed 0 / 0</div>
          <div class="scrollable-list">
            <ul id="nintendo-games"></ul>
          </div>
        </div>

        <div class="content" id="playstation">
          <h2>Playstation</h2>
          <form class="add-form" data-platform="playstation">
            <input type="text" placeholder="Add game title" required />
            <select>
              <option value="Not Started">Not Started</option>
              <option value="In Progress">In Progress</option>
              <option value="On Hold">On Hold</option>
              <option value="Completed">Completed</option>
            </select>
            <button type="submit">Add</button>
          </form>
          <div class="progress" id="playstation-progress">Completed 0 / 0</div>
          <div class="scrollable-list">
            <ul id="playstation-games"></ul>
          </div>
        </div>

        <div class="content" id="steam">
          <h2>Steam</h2>
          <form class="add-form" data-platform="steam">
            <input type="text" placeholder="Add game title" required />
            <select>
              <option value="Not Started">Not Started</option>
              <option value="In Progress">In Progress</option>
              <option value="On Hold">On Hold</option>
              <option value="Completed">Completed</option>
            </select>
            <button type="submit">Add</button>
          </form>
          <div class="progress" id="steam-progress">Completed 0 / 0</div>
          <div class="scrollable-list">
            <ul id="steam-games"></ul>
          </div>
        </div>

        <div class="content" id="xbox">
          <h2>Xbox</h2>
          <form class="add-form" data-platform="xbox">
            <input type="text" placeholder="Add game title" required />
            <select>
              <option value="Not Started">Not Started</option>
              <option value="In Progress">In Progress</option>
              <option value="On Hold">On Hold</option>
              <option value="Completed">Completed</option>
            </select>
            <button type="submit">Add</button>
          </form>
          <div class="progress" id="xbox-progress">Completed 0 / 0</div>
          <div class="scrollable-list">
            <ul id="xbox-games"></ul>
          </div>
        </div>
      </div>
    </div>
    <!-- Script -->
    <script>
      document.querySelectorAll(".tab-button").forEach((button) => {
        button.addEventListener("click", () => {
          const target = button.dataset.target;
          if (!target) return;

          document.querySelectorAll(".tab-button").forEach((btn) => btn.classList.remove("active"));
          button.classList.add("active");

          document.querySelectorAll(".content").forEach((c) => c.classList.remove("active"));
          document.getElementById(target).classList.add("active");
        });
      });

      function updateProgress(platform) {
        const list = document.getElementById(`${platform}-games`);
        const items = list.querySelectorAll("li");
        const completed = list.querySelectorAll(".tagCompleted").length;
        const progress = document.getElementById(`${platform}-progress`);
        progress.textContent = `Completed ${completed} / ${items.length}`;
      }

      function saveToLocalStorage() {
        const data = {};
        platforms.forEach((platform) => {
          const items = document.querySelectorAll(`#${platform}-games li`);
          data[platform] = Array.from(items).map((item) => {
            const tag = item.querySelector(".tag");
            const yearSelect = item.querySelector('select.year-input');
            const status = tag?.value || "OnHold";

            return {
              title: item.querySelector("span").textContent,
              status,
              year: yearSelect?.value || ""
            };
          });
        });
        data.prefix = "gameBacklog";
        localStorage.setItem("gameBacklog", JSON.stringify(data));
      }

      function loadFromLocalStorage() {
        const stored = localStorage.getItem("gameBacklog");
        if (!stored) return;

        try {
          const data = JSON.parse(stored);
          platforms.forEach((platform) => {
            const list = document.getElementById(`${platform}-games`);
            list.innerHTML = "";
            const sortedGames = (data[platform] || []).sort((a, b) => a.title.localeCompare(b.title));
            sortedGames.forEach((game) => {
              const li = createGameItem(platform, game.title, game.status, game.year);
              list.appendChild(li);
            });
            updateProgress(platform);
          });
        } catch {
          console.error("Failed to load game backlog from localStorage");
        }
      }

      function createGameItem(platform, title, status, year = "") {
        const li = document.createElement("li");
        const span = document.createElement("span");
        span.textContent = title;

        const tag = document.createElement("select");
        tag.classList.add("tag", `tag${status.replace(/\s/g, '')}`);
        ["NotStarted", "InProgress", "OnHold", "Completed"].forEach(opt => {
          const option = document.createElement("option");
          option.value = opt;
          option.textContent = opt.replace(/([A-Z])/g, ' $1').trim();
          if (opt === status.replace(/\s/g, '')) option.selected = true;
          tag.appendChild(option);
        });

        const yearSelect = document.createElement("select");
        yearSelect.classList.add("year-input");
        yearSelect.style.marginLeft = "10px";
        yearSelect.style.display = (status === "Completed") ? "inline-block" : "none";

        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = "Year";
        yearSelect.appendChild(defaultOption);

        // Add year options from 2025 to 1970
        for (let y = 2025; y >= 1970; y--) {
          const option = document.createElement("option");
          option.value = y;
          option.textContent = y;
          if (String(y) === year) option.selected = true;
          yearSelect.appendChild(option);
        }

        tag.addEventListener("change", () => {
          tag.className = "tag";
          tag.classList.add(`tag${tag.value}`);
          yearSelect.style.display = (tag.value === "Completed") ? "inline-block" : "none";
          updateProgress(platform);
          saveToLocalStorage();
      	});

        yearSelect.addEventListener("change", () => {
          saveToLocalStorage();
        });

        const removeBtn = document.createElement("button");
        removeBtn.textContent = "Remove";
        removeBtn.className = "remove-button";
        removeBtn.addEventListener("click", () => {
          li.remove();
          updateProgress(platform);
          saveToLocalStorage();
        });

        li.appendChild(span);
        li.appendChild(tag);
        li.appendChild(yearSelect);
        li.appendChild(removeBtn);
        return li;
      }

      document.querySelectorAll(".add-form").forEach((form) => {
        form.addEventListener("submit", function (e) {
          e.preventDefault();
          const platform = form.dataset.platform;
          const titleInput = form.querySelector("input");
          const statusSelect = form.querySelector("select");
          const gameList = document.getElementById(`${platform}-games`);

          const title = titleInput.value.trim();
          const status = statusSelect.value;
          if (!title) return;

          const li = createGameItem(platform, title, status);

          const existingItems = Array.from(gameList.querySelectorAll("li"));
          existingItems.push(li);
          existingItems.sort((a, b) => {
            const aText = a.querySelector("span").textContent.toLowerCase();
            const bText = b.querySelector("span").textContent.toLowerCase();
            return aText.localeCompare(bText);
          });

          gameList.innerHTML = "";
          existingItems.forEach(item => gameList.appendChild(item));

          titleInput.value = "";
          updateProgress(platform);
          saveToLocalStorage();
        });
      });

      const platforms = ["epic", "nintendo", "playstation", "steam", "xbox"];
      const statuses = ["All", "Completed", "NotStarted", "InProgress", "OnHold"];
      
      const statusLabels = {
        All: "All",
        Completed: "Completed",
        NotStarted: "Not Started",
        InProgress: "In Progress",
        OnHold: "On Hold"
      };

      platforms.forEach((platform) => {
        const filterContainer = document.createElement("div");
        filterContainer.id = `${platform}-filters`;
        filterContainer.className = "tab-buttons2";
        const container = document.getElementById(`${platform}-games`).parentElement;
        container.insertBefore(filterContainer, container.firstChild);

        statuses.forEach((status) => {
          const btn = document.createElement("div");
          btn.className = "tab-button";
          btn.textContent = statusLabels[status];
  		  btn.dataset.status = status;
          btn.addEventListener("click", () => filterGamesByStatus(platform, status));
          filterContainer.appendChild(btn);
        });
      });

      function filterGamesByStatus(platform, status) {
        const list = document.getElementById(`${platform}-games`);
        const items = list.querySelectorAll("li");

        items.forEach((item) => {
          const tag = item.querySelector(".tag");
          const value = tag?.value || "";
          const currentStatus = value;
          item.style.display = (status === "All" || currentStatus === status) ? "" : "none";
        });

        document.querySelectorAll(`#${platform}-filters .tab-button`).forEach((btn) => {
          btn.classList.remove("active");
          if (btn.textContent === status) btn.classList.add("active");
        });
      }

      function exportChecklist() {
        const data = { 
          prefix: "gameBacklog" // Add this line
        };

        platforms.forEach((platform) => {
          const items = document.querySelectorAll(`#${platform}-games li`);
          data[platform] = Array.from(items).map((item) => {
            const tag = item.querySelector(".tag");
            const yearSelect = item.querySelector('select.year-input');
            const status = tag?.value || "OnHold";

            return {
              title: item.querySelector("span").textContent,
              status,
              year: yearSelect?.value || ""
            };
          });
        });

        const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "game-backlog.json";
        a.click();
        URL.revokeObjectURL(url);
      }

      function importChecklist() {
        const fileInput = document.createElement("input");
        fileInput.type = "file";
        fileInput.accept = "application/json";
        fileInput.style.display = "none";

        fileInput.addEventListener("change", (event) => {
          const file = event.target.files[0];
          if (!file) return;

          const reader = new FileReader();
          reader.onload = (e) => {
            try {
              const data = JSON.parse(e.target.result);

              if (data.prefix !== "gameBacklog") {
                alert(`This checklist file is not for this backlog (found prefix: "${data.prefix || 'none'}"). Import aborted.`);
                return;
              }

              platforms.forEach((platform) => {
                const list = document.getElementById(`${platform}-games`);
                list.innerHTML = "";
                const sortedGames = (data[platform] || []).sort((a, b) => a.title.localeCompare(b.title));
                sortedGames.forEach((game) => {
                  const li = createGameItem(platform, game.title, game.status, game.year);
                  list.appendChild(li);
                });
                updateProgress(platform);
              });

              saveToLocalStorage();
              alert("Game backlog imported successfully.");
            } catch {
              alert("Invalid file format.");
            }
          };

          reader.readAsText(file);
        });

        document.body.appendChild(fileInput);
        fileInput.click();
      }

      window.addEventListener("DOMContentLoaded", loadFromLocalStorage);
    </script>
  </body>
</html>

